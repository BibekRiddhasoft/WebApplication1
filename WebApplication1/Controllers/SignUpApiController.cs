using Microsoft.AspNetCore.Builder;
using Microsoft.AspNetCore.Mvc;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using WebApplication1.Manager;
using WebApplication1.Repository;
using WebApplication1.Service;

// For more information on enabling Web API for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860

namespace WebApplication1.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class SignUpApiController : ControllerBase
    {

        [HttpPost]
        [Route("SignUp")]
        public ServiceResult<bool> Post(SignUp model)
        {
            var manager = new SignUpManager();
            var result = manager.AddSignUpAccountInfo(model);
            return new ServiceResult<bool>()
            {
                Data = result.Data,
                Message = result.Message,
                Status = result.Status
            };
        }

        [HttpPost]
        [Route("Login")]
        public ServiceResult<bool> Login(Login model)
        {
            var manager = new SignUpManager();
            var result = manager.Login(model);
            return new ServiceResult<bool>()
            {
                Data = result.Data,
                Message = result.Message,
                Status = result.Status
            };
        }

        [HttpGet]
        [Route("GetCountries")]
        public ServiceResult<List<Country>> GetCountries()
        {
            var manager = new SignUpManager();
            return manager.GetCountries();

        }
        [HttpGet]
        [Route("GetCities")]
        public ServiceResult<List<City>> GetCities(int countryId = 0)
        {
            var manager = new SignUpManager();
            return manager.GetCities(countryId);

        }


    }

    public class Login
    {
        public string Email { get; set; }
        public string Password { get; set; }
    }
}
